<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Concepts</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}
nav {
    background-color: #f8f9fa;
    border: 1px solid #e1e4e8;
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0 40px 0;
    max-width: 600px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}

/* ã€Œç›®æ¬¡ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ« */
nav h3 {
    margin-top: 0;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 2px solid #0969da;
    color: #24292f;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
}

/* ã‚¿ã‚¤ãƒˆãƒ«ã®å‰ã«ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰ã‚’è¿½åŠ  */
nav h3::before {
    content: "ğŸ“–";
    margin-right: 8px;
}

/* ãƒªã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
#toc {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

#toc li {
    margin-bottom: 8px;
    line-height: 1.4;
}

/* ãƒªãƒ³ã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */
#toc a {
    color: #0969da;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
    display: inline-block;
}

#toc a:hover {
    color: #cf222e;
    transform: translateX(5px); /* ãƒ›ãƒãƒ¼æ™‚ã«å°‘ã—å³ã«å‹•ã */
}

/* h3ï¼ˆå°è¦‹å‡ºã—ï¼‰ãŒã‚ã‚‹å ´åˆã®ãƒã‚¹ãƒˆè¡¨ç¾ï¼ˆJSã®ä¿®æ­£ã‚‚å¿…è¦ï¼‰ */
.toc-h3 {
    padding-left: 20px;
    font-size: 0.9em;
    opacity: 0.8;
}


/* è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ« (h1) */
h1 {
    font-size: 2rem;
    color: #24292f;
    line-height: 1.3;
    padding: 20px 0;
    margin-bottom: 30px;
    border-bottom: 3px double #e1e4e8; /* äºŒé‡ç·šã§ä¸Šå“ã« */
    text-align: center; /* ã‚¿ã‚¤ãƒˆãƒ«ã‚’ä¸­å¤®ã«å¯„ã›ã¦ç‰¹åˆ¥æ„Ÿã‚’å‡ºã™ */
}

/* ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦‹å‡ºã— (h2) */
h2 {
    font-size: 1.5rem;
    color: #24292f;
    padding: 0.5rem 1rem;
    margin: 40px 0 20px 0;
    background: linear-gradient(transparent 70%, #e8f0fe 70%); /* ä¸‹å´ã«è–„ã„è‰²ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ */
    border-left: 6px solid #0969da; /* ç›®æ¬¡ã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã¨åˆã‚ã›ã‚‹ */
    border-radius: 2px;
    display: flex;
    align-items: center;
}

/* å¼·èª¿æ–‡å­— (strong) */
strong {
    font-weight: bold;
    color: #cf222e; /* ãƒ›ãƒãƒ¼æ™‚ã®èµ¤è‰²ã¨åˆã‚ã›ã¦çµ±ä¸€æ„Ÿã‚’å‡ºã™ */
    background: linear-gradient(transparent 60%, #fff2cc 60%); /* é»„è‰²ã®ãƒãƒ¼ã‚«ãƒ¼é¢¨ */
    padding: 0 2px;
}

/* å¼•ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠ */
blockquote {
    position: relative;
    padding: 20px 30px;
    margin: 30px 0;
    background-color: #f6f8fa; /* ç›®æ¬¡ã®èƒŒæ™¯ã‚ˆã‚Šå°‘ã—ã ã‘æ¿ƒã„ã‚°ãƒ¬ãƒ¼ */
    border-left: 5px solid #d0d7de; /* è½ã¡ç€ã„ãŸã‚°ãƒ¬ãƒ¼ã®å¢ƒç•Œç·š */
    color: #57606a; /* æ–‡å­—è‰²ã¯å°‘ã—è–„ãã—ã¦å¼•ç”¨ã‚‰ã—ã•ã‚’å‡ºã™ */
    font-style: italic;
    border-radius: 0 8px 8px 0;
}

/* å¼•ç”¨ç¬¦ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è£…é£¾ã¨ã—ã¦è¿½åŠ  */
blockquote::before {
    content: "â€œ";
    position: absolute;
    top: -5px;
    left: 10px;
    font-size: 40px;
    color: #d0d7de;
    font-family: serif;
    line-height: 1;
}

/* èª­è€…ã«ãªã‚‹ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
.btn-subscribe {
    display: inline-block;
    padding: 12px 35px; /* æ¨ªå¹…ã‚’åºƒã‚ã«ã¨ã£ã¦å­˜åœ¨æ„Ÿã‚’å‡ºã—ã¾ã™ */
    background-color: #383838; /* ãŠå¥½ã¿ã®è‰²ã«å¤‰æ›´ã—ã¦ãã ã•ã„ */
    color: #ffffff !important;
    text-decoration: none;
    border-radius: 4px;
    font-weight: bold;
    transition: 0.3s;
}

.btn-subscribe:hover {
    background-color: #555555;
    text-decoration: none;
}

/* ã¯ã¦ãªãƒ–ãƒ­ã‚°ã§è¦‹ãˆã¦ã—ã¾ã†æ•°å¼ãƒ‡ãƒ¼ã‚¿ã‚’éè¡¨ç¤ºã«ã™ã‚‹ */
.katex-html {
    display: none !important;
}

.katex-mathml {
    display: inline !important;
}
/* Amazonã‚«ãƒ¼ãƒ‰å‹ã®ã‚ªã‚·ãƒ£ãƒ¬ãªãƒ‡ã‚¶ã‚¤ãƒ³ */
.shop-card {
    display: flex;
    max-width: 500px;
    margin: 20px auto;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    overflow: hidden;
    background-color: #ffffff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* ãƒã‚¦ã‚¹ãƒ›ãƒƒãƒ—ã—ãŸæ™‚ã®å‹•ã */
.shop-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.shop-card-image {
    width: 150px;
    min-width: 150px;
    background-color: #f9f9f9;
    display: flex;
    align-items: center;
    justify-content: center;
}

.shop-card-image img {
    max-width: 100%;
    height: auto;
    padding: 10px;
}

.shop-card-content {
    padding: 16px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.shop-card-title {
    font-weight: bold;
    font-size: 1.1rem;
    color: #333;
    margin-bottom: 8px;
    line-height: 1.4;
}

.shop-card-description {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 16px;
}

/* Amazonã‚‰ã—ã„ã‚ªãƒ¬ãƒ³ã‚¸ãƒœã‚¿ãƒ³ */
.shop-card-link a {
    display: inline-block;
    background-color: #ff9900;
    color: #fff !important;
    text-decoration: none !important;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
    transition: background-color 0.2s;
}

.shop-card-link a:hover {
    background-color: #e68a00;
}

/* ã‚¹ãƒãƒ›å¯¾å¿œï¼šç¸¦ä¸¦ã³ã«ã™ã‚‹ */
@media (max-width: 480px) {
    .shop-card {
        flex-direction: column;
        max-width: 100%;
    }
    .shop-card-image {
        width: 100%;
        height: 200px;
    }
}
</style>
        
        </head>
<nav>
        <h3>Menu</h3>
        <ul id="toc"></ul> 
</nav>


        <body class="vscode-body vscode-light">
            <p>The world of <strong>optimization</strong> is extremely deep, but at its core lies a simple objective:</p>
<blockquote>
<p><strong>To derive the best possible outcome under limited resources.</strong></p>
</blockquote>
<p>To understand optimization in the contexts of mathematics, engineering, or business, it is helpful to systematically organize the essential concepts and the ideas that function as practical â€œaxioms,â€ and then explain them through a concrete example.</p>
<hr>
<h1 id="concepts">Concepts</h1>
<p>We begin by organizing the core concepts necessary to perform optimization.</p>
<hr>
<h2 id="1-the-three-elements-of-optimization-fundamentals-of-formulation">1. The Three Elements of Optimization (Fundamentals of Formulation)</h2>
<p>Any optimization problem starts by decomposing it into the following three components. Without defining these, optimization cannot even begin.</p>
<ul>
<li><strong>Decision Variables</strong>: The values you can control (e.g., production quantities, advertising budgets, transportation routes).</li>
<li><strong>Objective Function</strong>: What you want to maximize (profit, efficiency) or minimize (cost, error, time).</li>
<li><strong>Constraints</strong>: Rules or limits that must be respected (budget ceilings, physical space, deadlines).</li>
</ul>
<hr>
<h2 id="2-important-axioms-and-fundamental-principles">2. Important â€œAxiomsâ€ and Fundamental Principles</h2>
<p>These are not strict mathematical axioms, but rather powerful assumptions treated as foundational in both theory and practice.</p>
<h3 id="principle-of-optimality">Principle of Optimality</h3>
<p>Proposed by Richard Bellman, this is the core idea behind dynamic programming.</p>
<blockquote>
<p>â€œAn optimal policy has the property that, whatever the initial state and decision are, the remaining decisions must constitute an optimal policy with regard to the state resulting from the first decision.â€</p>
</blockquote>
<p>In simple terms:</p>
<blockquote>
<p><strong>If a route is globally shortest, then every sub-segment of that route must also be optimal.</strong></p>
</blockquote>
<hr>
<h3 id="local-vs-global-optima">Local vs. Global Optima</h3>
<p>One of the most important distinctions in optimization:</p>
<ul>
<li><strong>Local Optimum</strong>: The best solution within a neighborhood (â€œa frog in a wellâ€ situation).</li>
<li><strong>Global Optimum</strong>: The best solution across the entire feasible region.</li>
</ul>
<p>Many algorithms descend along gradients (like rolling down a hill), but in complex landscapes they may get trapped in â€œfalse valleysâ€ (local minima).</p>
<p>Thus:</p>
<blockquote>
<p>Local optimality â‰  Global optimality</p>
</blockquote>
<p>This tension is central to optimization.</p>
<hr>
<h2 id="3-key-mathematical-concepts">3. Key Mathematical Concepts</h2>
<h3 id="convexity">Convexity</h3>
<p>Convexity provides enormous advantages in optimization.</p>
<ul>
<li><strong>Convex set / convex function</strong>: If the function has a â€œbowl shape,â€ then
<strong>Local optimum = Global optimum</strong> is guaranteed.</li>
<li>Non-convex problems, by contrast, are among the most difficult challenges in modern AI and deep learning.</li>
</ul>
<hr>
<h3 id="duality">Duality</h3>
<p>Every optimization problem (the <strong>primal problem</strong>) has a corresponding <strong>dual problem</strong> that is structurally linked.</p>
<p>For example:</p>
<ul>
<li>Behind a â€œprofit maximizationâ€ problem lies a perspective of â€œminimizing the cost of resources.â€</li>
</ul>
<p>By switching perspectives to the dual, one can sometimes solve problems more efficiently when the primal is difficult.</p>
<hr>
<h2 id="4-real-world-constraints-trade-offs">4. Real-World Constraints: Trade-offs</h2>
<p>Optimization inevitably involves trade-offs.</p>
<h3 id="pareto-optimality">Pareto Optimality</h3>
<p>A state is <strong>Pareto optimal</strong> if:</p>
<blockquote>
<p>No individualâ€™s situation can be improved without worsening someone elseâ€™s.</p>
</blockquote>
<h3 id="trade-off-between-computational-cost-and-accuracy">Trade-off Between Computational Cost and Accuracy</h3>
<p>Seeking a perfect (exact) solution may take impractically long. In such cases, we often accept a â€œgood enoughâ€ approximate solution that can be computed within realistic time constraints.</p>
<hr>
<h1 id="a-concrete-problem">A Concrete Problem</h1>
<p>Let us now solve a classical and widely used optimization model:</p>
<h2 id="linear-programming">Linear Programming</h2>
<hr>
<h1 id="problem-production-optimization-at-a-juice-factory">Problem: Production Optimization at a Juice Factory</h1>
<p>Imagine you are the manager of a juice factory.</p>
<p>You produce two types of juice:</p>
<ul>
<li><strong>Special Mix</strong></li>
<li><strong>Rich Blend</strong></li>
</ul>
<p>Using apples and oranges, how should you allocate your limited fruit inventory to <strong>maximize revenue</strong>?</p>
<hr>
<h2 id="1-decision-variables">1. Decision Variables</h2>
<ul>
<li>( x ): Number of cups of Special Mix produced</li>
<li>( y ): Number of cups of Rich Blend produced</li>
</ul>
<hr>
<h2 id="2-constraints">2. Constraints</h2>
<h3 id="apple-inventory">Apple Inventory</h3>
<ul>
<li>Special Mix: 100g per cup</li>
<li>Rich Blend: 200g per cup</li>
<li>Total apple inventory: <strong>2,000g</strong></li>
</ul>
<p>[
100x + 200y \le 2000
]</p>
<hr>
<h3 id="orange-inventory">Orange Inventory</h3>
<ul>
<li>Special Mix: 200g per cup</li>
<li>Rich Blend: 100g per cup</li>
<li>Total orange inventory: <strong>2,000g</strong></li>
</ul>
<p>[
200x + 100y \le 2000
]</p>
<p>Dividing by 100:</p>
<p>[
2x + y \le 20
]</p>
<hr>
<h3 id="non-negativity-constraint">Non-negativity Constraint</h3>
<p>[
x \ge 0, \quad y \ge 0
]</p>
<p>Production quantities cannot be negative.</p>
<hr>
<h2 id="3-objective-function">3. Objective Function</h2>
<ul>
<li>Special Mix sells for 500 yen per cup</li>
<li>Rich Blend sells for 400 yen per cup</li>
</ul>
<p>Revenue:</p>
<p>[
z = 500x + 400y
]</p>
<p>We seek to maximize ( z ).</p>
<hr>
<h1 id="solution">Solution</h1>
<h2 id="step-1-visualizing-the-feasible-region">Step 1: Visualizing the Feasible Region</h2>
<p>Rewrite constraints in simplified form:</p>
<ol>
<li>
<p>Apple constraint:
[
x + 2y = 20
]</p>
<ul>
<li>If ( x=0 ), then ( y=10 )</li>
<li>If ( y=0 ), then ( x=20 )</li>
</ul>
</li>
<li>
<p>Orange constraint:
[
2x + y = 20
]</p>
<ul>
<li>If ( x=0 ), then ( y=20 )</li>
<li>If ( y=0 ), then ( x=10 )</li>
</ul>
</li>
</ol>
<p>The feasible region is the area enclosed by these lines and the coordinate axes.</p>
<hr>
<h2 id="step-2-why-is-the-intersection-the-candidate">Step 2: Why Is the Intersection the Candidate?</h2>
<ul>
<li>Special Mix (500 yen) has higher unit price than Rich Blend (400 yen).</li>
<li>Producing only Special Mix is limited by oranges (( x \le 10 )).</li>
<li>Producing only Rich Blend is limited by apples (( y \le 10 )).</li>
</ul>
<p>The most efficient allocation often occurs at the intersection where <strong>both resources are fully utilized</strong>.</p>
<hr>
<h2 id="step-3-solving-the-system">Step 3: Solving the System</h2>
<p>Solve:</p>
<p>[
x + 2y = 20
]
[
2x + y = 20
]</p>
<p>The solution:</p>
<p>[
x = 6.67, \quad y = 6.67
]</p>
<p>However, since production in â€œcupsâ€ suggests integers are more appropriate, we test nearby integer combinations:</p>
<ul>
<li>(6, 7): ( 500(6) + 400(7) = 5800 )</li>
<li>(7, 6): ( 500(7) + 400(6) = 5900 )</li>
<li>(6, 6): ( 5400 )</li>
<li>(7, 7): violates constraint</li>
</ul>
<p>Thus, the optimal integer solution:</p>
<p>[
x = 7, \quad y = 6
]</p>
<hr>
<h2 id="maximum-revenue">Maximum Revenue</h2>
<p>[
\boxed{5900 \text{ yen}}
]</p>
<hr>
<h1 id="optimization-algorithms">Optimization Algorithms</h1>
<p>Different problems require different algorithms depending on structure (linear vs. non-convex, continuous vs. discrete).</p>
<hr>
<h2 id="1-linear--convex-optimization-guaranteed-global-optimum">1. Linear / Convex Optimization (Guaranteed Global Optimum)</h2>
<ul>
<li>
<p><strong>Simplex Method</strong>:
Moves from vertex to vertex of the feasible region.</p>
</li>
<li>
<p><strong>Interior Point Method</strong>:
Travels through the interior; efficient for large-scale problems.</p>
</li>
</ul>
<hr>
<h2 id="2-gradient-based-algorithms-core-of-ai--deep-learning">2. Gradient-Based Algorithms (Core of AI &amp; Deep Learning)</h2>
<ul>
<li>
<p><strong>Gradient Descent</strong>:
Moves in the direction of steepest descent.</p>
</li>
<li>
<p><strong>Adam / RMSprop</strong>:
Enhanced gradient methods with momentum and adaptive learning rates. Widely used in deep learning.</p>
</li>
</ul>
<hr>
<h2 id="3-metaheuristics-complex-non-convex-problems">3. Metaheuristics (Complex, Non-Convex Problems)</h2>
<ul>
<li>
<p><strong>Genetic Algorithm</strong>:
Inspired by biological evolution (selection, crossover, mutation).</p>
</li>
<li>
<p><strong>Simulated Annealing</strong>:
Inspired by metal cooling; allows random exploration early on to escape local minima.</p>
</li>
</ul>
<hr>
<h2 id="4-discrete--combinatorial-optimization">4. Discrete / Combinatorial Optimization</h2>
<ul>
<li>
<p><strong>Branch and Bound</strong>:
Systematically explores integer solution branches and prunes suboptimal ones.</p>
</li>
<li>
<p><strong>Dynamic Programming</strong>:
Breaks problems into smaller subproblems.
The shortest-path algorithm known as <strong>Edsger W. Dijkstraâ€™s algorithm</strong> is a classic example.</p>
</li>
</ul>
<hr>
<h1 id="algorithm-selection-matrix">Algorithm Selection Matrix</h1>
<table>
<thead>
<tr>
<th>Problem Characteristics</th>
<th>Recommended Algorithm</th>
<th>Typical Applications</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linear, clear constraints</td>
<td>Simplex, Interior Point</td>
<td>Budget allocation, production planning</td>
</tr>
<tr>
<td>Differentiable, large-scale data</td>
<td>Gradient Descent (Adam)</td>
<td>AI model training</td>
</tr>
<tr>
<td>Complex, irregular rules</td>
<td>Genetic Algorithm</td>
<td>Facility layout, shift scheduling</td>
</tr>
<tr>
<td>Sequential / shortest path</td>
<td>Dynamic Programming</td>
<td>Navigation systems, puzzles, SEO</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="conclusion">Conclusion</h1>
<p>In this article, we explored:</p>
<ul>
<li>The conceptual foundations of optimization</li>
<li>Key principles such as convexity, duality, and local vs. global optimality</li>
<li>A concrete linear programming example</li>
<li>Major categories of optimization algorithms</li>
</ul>
<p>Optimization is a profoundly deep discipline involving both formulation and solution techniques. It frequently appears in computational decision-making systemsâ€”even when we may not explicitly realize it.</p>
<p>I hope this article serves as a useful reference for understanding the essence of optimization.</p>

            
<script>
const toc = document.getElementById('toc');
// h2 ã¨ h3 ã®ä¸¡æ–¹ã‚’å–å¾—
const headings = document.querySelectorAll('h2, h3');

headings.forEach((heading, i) => {
    if (!heading.id) heading.id = `heading-${i}`;
    
    const li = document.createElement('li');
    const link = document.createElement('a');
    link.href = `#${heading.id}`;
    link.textContent = heading.textContent;
    
    // h3 ã®å ´åˆã¯ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã—ã¦å­—ä¸‹ã’ã™ã‚‹
    if (heading.tagName === 'H3') {
        li.classList.add('toc-h3');
    }
    
    li.appendChild(link);
    toc.appendChild(li);
});

// ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
        });
    });
});
</script>

 
        </body>
        </html>